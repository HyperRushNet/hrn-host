<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><title>C</title></head><body>
<h3>Controller</h3>
<textarea id="o" style="width:100%;height:100px" placeholder="Output wordt hier gezet"></textarea>
<textarea id="i" style="width:100%;height:100px" placeholder="Plak hier antwoord"></textarea>
<button onclick="a()">Jump</button>
<button onclick="b()">Attack</button>
<pre id="l"></pre>
<script>
let p=new RTCPeerConnection(),d=p.createDataChannel("c"),c=[];
let log=t=>l.textContent+=t+"\n",l=document.getElementById('l');
d.onopen=()=>log("üü¢ Open"); d.onmessage=e=>log("‚¨ÖÔ∏è "+e.data);
p.onicecandidate=e=>{if(e.candidate)c.push(e.candidate.toJSON()),z()};
p.createOffer().then(o=>p.setLocalDescription(o));
let z=()=>o.value=btoa(JSON.stringify({s:p.localDescription,c:c}));
let x=document.getElementById("i"),o=document.getElementById("o");
x.oninput=()=>{
  try{let j=JSON.parse(atob(x.value.replace(/\s/g,'')));
  p.setRemoteDescription(j.s); j.c.forEach(i=>p.addIceCandidate(new RTCIceCandidate(i)))
  }catch(e){}
};
let a=()=>d.readyState=="open"&&(d.send("jump"),log("‚û°Ô∏è jump"));
let b=()=>d.readyState=="open"&&(d.send("attack"),log("‚û°Ô∏è attack"));
</script></body></html>
