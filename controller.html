<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1"><title>C</title></head><body>
<h3>Controller</h3>
<textarea id="o" style="width:100%;height:100px" placeholder="Output"></textarea>
<textarea id="i" style="width:100%;height:100px" placeholder="Plak antwoord"></textarea>
<button onclick="s('jump')">Jump</button>
<button onclick="s('attack')">Attack</button>
<pre id="l"></pre>
<script>
let p=new RTCPeerConnection({
  iceServers:[],
  iceTransportPolicy:"all",
  iceCandidatePoolSize:0
}),d=p.createDataChannel("c",{ordered:false,maxRetransmits:0}),c=[];
let o=document.getElementById("o"),i=document.getElementById("i"),l=document.getElementById("l");
let log=t=>l.textContent+=t+"\n";
d.onopen=()=>log("üü¢ Open"); d.onmessage=e=>log("‚¨ÖÔ∏è "+e.data);
p.onicecandidate=e=>{if(e.candidate)c.push(e.candidate.toJSON()),o.value=btoa(JSON.stringify({s:p.localDescription,c:c}))};
p.createOffer().then(o=>p.setLocalDescription(o));
i.oninput=()=>{try{
  let j=JSON.parse(atob(i.value.replace(/\s/g,'')));
  p.setRemoteDescription(j.s);
  j.c.forEach(k=>p.addIceCandidate(new RTCIceCandidate(k)))
}catch{}};
let s=msg=>{if(d.readyState==="open")d.send(msg),log("‚û°Ô∏è "+msg)};
</script></body></html>
